@model IEnumerable<Shop.Common.ViewModels.UserEditView>
@using PVT.Q1._2017.Shop.Helpers
@using Shop.Common.Models

@{
    ViewBag.Title = "UsersEdit";
}

<h2>UsersEdit</h2>

<div class="ui-widget">
    <label for="lastName">Last Name: </label>
    <input id="lastName">
</div>

@Html.Partial("_UsersEdit", Model)

@Html.PageLinks(ViewBag.PageInfo as PageInfo, i => Url.Action("UsersEdit", new { id = i, controller = "Manage", area = "User" }))

@section scripts
{
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script>
        $(function () {
            $("#lastName").autocomplete(
                {
                    minLength: 2,
                    source: function (request, response) {
                        $.ajax(
                            {
                                url: "@Url.Action("GetMatchingData",new { controller = "Manage", area = "User"})",
                                type: "POST",
                                data: {
                                    term: request.term
                                },
                                success: function (data) {
                                    response($.map(data, function (item) {
                                        return {
                                            label: item.LastName + " "+ item.FirstName,
                                            value: item.LastName,
                                            Id: item.Id
                                        }
                                    })
                                    );
                                }

                            });
                    },
                    select: function (event, ui) {
                        alert(ui.item.Id);
                        return false;
                    }
                });
        });
    </script>
}


@section cssStyles
{
    <link href="~/Content/themes/base/autocomplete.css" rel="stylesheet" />
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
}